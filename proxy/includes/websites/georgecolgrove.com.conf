server {
    listen                  443 ssl http2;
    listen                  [::]:443 ssl http2;
    server_name             www.georgecolgrove.com www.georgecolgrove.local;
    include                 /etc/nginx/includes/universal.conf;

    include                 /etc/nginx/includes/ssl.conf;
    include                 /etc/nginx/includes/georgecolgrove.ssl.conf;
    
    location / {
        include             /etc/nginx/includes/proxy.conf;      
        proxy_set_header    Host $host;
        proxy_http_version  1.1;
        proxy_pass          http://angular-georgecolgrove-client;
    }

    access_log              off;
    error_log               /var/log/nginx/error.log error;
}
server {
    listen                  443 ssl http2;
    listen                  [::]:443 ssl http2;
    server_name             georgecolgrove.com georgecolgrove.local;
    
    include                 /etc/nginx/includes/ssl.conf;
    include                 /etc/nginx/includes/georgecolgrove.ssl.conf;

    location / {
        return              301 https://www.$host$request_uri;
    }

}
server {
    listen                  80;
    listen                  [::]:80;
    server_name             georgecolgrove.com georgecolgrove.local;
    include                 /etc/nginx/includes/universal.conf; 

    location / {
        return              301 https://$host$request_uri;
    }

}
server {
    listen                  80;
    listen                  [::]:80;
    server_name             www.georgecolgrove.com www.georgecolgrove.local;

    location / {
        return              301 https://$host$request_uri;
    }
}
server {
    listen                  80;
    listen                  [::]:80;
    server_name             php.georgecolgrove.com php.georgecolgrove.local; 

    location / {
        return              301 https://$host$request_uri;
    }
}

server {
    listen                  443 ssl http2;
    listen                  [::]:443 ssl http2;
    server_name             php.georgecolgrove.com php.georgecolgrove.local; 

    gzip                    on;
    gzip_vary               on;
    gzip_http_version       1.1;
    gzip_proxied            any;
    gzip_min_length         20;
    gzip_disable            "MSIE [1-6]\.";
    gzip_types              text/plain text/xml text/css
                            text/comma-separated-values
                            text/javascript
                            application/javascript
                            application/x-javascript
                            application/atom+xml;
    include                 /etc/nginx/includes/universal.conf;

    # Path for SSL config/key/certificate
    include                 /etc/nginx/includes/ssl.conf;
    include                 /etc/nginx/includes/georgecolgrove.ssl.conf;
    
    location / {
        include             /etc/nginx/includes/proxy.conf;
        proxy_http_version  1.1;  
        proxy_set_header    Host $host;
        proxy_pass          http://georgecolgrove;
    }
}

#cdn-georgecolgrove
server {
    listen                  80;
    listen                  [::]:80;
    server_name             cdn.georgecolgrove.com cdn.georgecolgrove.local; 

    location / {
        return              301 https://$host$request_uri;
    }
}
server {
    listen                  443 ssl http2;
    listen                  [::]:443 ssl http2;
    server_name             cdn.georgecolgrove.com cdn.georgecolgrove.local;
    include                 /etc/nginx/includes/universal.conf;

    # Path for SSL config/key/certificate
    include                 /etc/nginx/includes/ssl.conf;
    include                 /etc/nginx/includes/georgecolgrove.ssl.conf;
    
    location / {
        include             /etc/nginx/includes/proxy.conf;
        proxy_http_version  1.1;   
        proxy_set_header    Host $host;
        proxy_pass          http://cdn-georgecolgrove;
    }

    access_log              on;
    error_log               /var/log/nginx/error.log error;
}